Index: src/main/java/hudson/plugins/trac/TracLinkAnnotator.java
===================================================================
--- src/main/java/hudson/plugins/trac/TracLinkAnnotator.java	(revision 14713)
+++ src/main/java/hudson/plugins/trac/TracLinkAnnotator.java	(working copy)
@@ -9,10 +9,12 @@
 import java.util.regex.Pattern;
 
 /**
- * Annotates <a href="http://trac.edgewall.org/wiki/TracLinks">TracLink</a>
- * notation in changelog messages.
- *
+ * Annotates <a href="http://trac.edgewall.org/wiki/TracLinks">TracLink</a> and
+ * <a href="http://trac.edgewall.org/wiki/InterTrac">InterTrac</a> notation in
+ * changelog messages.
+ * 
  * @author Kohsuke Kawaguchi
+ * @author Rick Riemer
  */
 public class TracLinkAnnotator extends ChangeLogAnnotator {
     @Override
@@ -21,12 +23,16 @@
         if(tpp==null || tpp.tracWebsite==null)
             return; // not configured
 
-        String url = tpp.tracWebsite;
-        for (LinkMarkup markup : MARKUPS)
-            markup.process(text, url);
+        annotate(tpp.tracWebsite, text);
     }
 
-    static final class LinkMarkup {
+    void annotate(String url, MarkupText text) {
+        for (LinkMarkup markup : MARKUPS) {
+            markup.process(text, url);
+        }
+	}
+
+	private static final class LinkMarkup {
         private final Pattern pattern;
         private final String href;
 
@@ -49,9 +55,9 @@
         private static final Pattern ANYWORD_PATTERN = Pattern.compile("ANYWORD");
     }
 
-    static final LinkMarkup[] MARKUPS = new LinkMarkup[] {
+    private static final LinkMarkup[] MARKUPS = new LinkMarkup[] {
         new LinkMarkup(
-            "(?:#|ticket:)NUM",
+            "(?<!\\:)(?:#|ticket:)NUM",
             "ticket/$1"),
         new LinkMarkup(
             "comment:ticket:NUM:NUM",
@@ -60,19 +66,34 @@
             "\\{NUM\\}|report:NUM",
             "report/$1$2"),  // only $1 or $2 matches, and the other will expand to ""
         new LinkMarkup(
-            "rNUM:NUM|\\[NUM:NUM\\]|log:@NUM:NUM",
+            "rNUM:NUM|\\[NUM:NUM\\]|(?<!\\:)log:@NUM:NUM",
             "log/?rev=$2$4$6&stop_ver=$1$3$5"),
         new LinkMarkup(
-            "rNUM(?!:)|\\[NUM\\]|changeset:NUM", // (?!:) is a position match with negative look ahead, so that "r5" portion of "r5:6" won't match.
+            "rNUM(?!:)|\\[NUM\\]|(?<!\\:)changeset:NUM", // (?!:) is a position match with negative look ahead, so that "r5" portion of "r5:6" won't match.
             "changeset/$1$2$3"),
         // TODO: log:trunk@1:3 format
         // TODO: diffs
         new LinkMarkup(
-            "((?:[A-Z][a-z]+){2,})|wiki:ANYWORD",
+            "(?<!\\:)(?:((?:[A-Z][a-z]+){2,})|wiki:ANYWORD)",
             "wiki/$1$2"),
         new LinkMarkup(
             "milestone:ANYWORD",
             "milestone/$1"),
         // TODO: attachment and file.
+        new LinkMarkup( // InterTrac ticket links (short: #T123)
+        	"#([a-zA-Z])NUM",
+        	"search?q=%23$1$2"),
+        new LinkMarkup( // InterTrac changeset links (short: [T123])
+             "\\[([a-zA-Z])NUM\\]",
+             "search?q=%5B$1$2%5D"),
+        new LinkMarkup( // InterTrac ticket links (medium: trac:#123)
+        	"ANYWORD\\:#NUM",
+        	"search?q=$1%3A%23$2"),
+        new LinkMarkup( // InterTrac ticket or changeset links (full: trac:ticket:123)
+        	"ANYWORD\\:((?:ticket)|(?:changeset))\\:NUM",
+        	"search?q=$1%3A$2%3A$3"),
+        new LinkMarkup( // InterTrac wiki links (full: trac:wiki:PageName)
+        	"ANYWORD\\:wiki\\:ANYWORD",
+        	"search?q=$1%3Awiki%3A$2")
     };
 }
Index: src/test/java/hudson/plugins/trac/TracLinkAnnotatorTest.java
===================================================================
--- src/test/java/hudson/plugins/trac/TracLinkAnnotatorTest.java	(revision 14713)
+++ src/test/java/hudson/plugins/trac/TracLinkAnnotatorTest.java	(working copy)
@@ -1,26 +1,78 @@
 package hudson.plugins.trac;
 
 import hudson.MarkupText;
-
 import junit.framework.TestCase;
 
 
 public class TracLinkAnnotatorTest extends TestCase {
-
     private static final String TRAC_URL = "http://trac/";
-
+    
     public void testWikiLinkSyntax() {
         assertAnnotatedTextEquals("Nothing here.", "Nothing here.");
         assertAnnotatedTextEquals("Text with WikiLink.", "Text with <a href='" + TRAC_URL + "wiki/WikiLink'>WikiLink</a>.");
     }
+    
+    public void testTicketLinkSyntax() {
+		assertAnnotatedTextEquals("Text with ticket #123 link",
+				"Text with ticket <a href='" + TRAC_URL + "ticket/123'>#123</a> link");
+		assertAnnotatedTextEquals("#123",
+				"<a href='" + TRAC_URL + "ticket/123'>#123</a>");
+	}
 
-    private void assertAnnotatedTextEquals(String originalText, String expectedAnnotatedText) {
-        MarkupText markupText = new MarkupText(originalText);
+	public void testInterTracShortTicketLinkSyntax() {
+		assertAnnotatedTextEquals("Text with #T123 link",
+				"Text with <a href='" + TRAC_URL + "search?q=%23T123'>#T123</a> link");
+		assertAnnotatedTextEquals("#T123",
+				"<a href='" + TRAC_URL + "search?q=%23T123'>#T123</a>");
+	}
 
-        for (TracLinkAnnotator.LinkMarkup markup : TracLinkAnnotator.MARKUPS) {
-            markup.process(markupText, TRAC_URL);
-        }
+	public void testInterTracMediumTicketLinkSyntax() {
+		assertAnnotatedTextEquals("Text with trac:#123 link",
+				"Text with <a href='" + TRAC_URL + "search?q=trac%3A%23123'>trac:#123</a> link");
+		assertAnnotatedTextEquals("trac:#123",
+				"<a href='" + TRAC_URL + "search?q=trac%3A%23123'>trac:#123</a>");
+	}
+	
+	public void testInterTracFullTicketLinkSyntax() {
+		assertAnnotatedTextEquals("Text with trac:ticket:123 link",
+				"Text with <a href='" + TRAC_URL + "search?q=trac%3Aticket%3A123'>trac:ticket:123</a> link");
+		assertAnnotatedTextEquals("trac:ticket:123",
+				"<a href='" + TRAC_URL + "search?q=trac%3Aticket%3A123'>trac:ticket:123</a>");
+	}
+	
+	public void testInterTracShortChangesetLinkSyntax() {
+		assertAnnotatedTextEquals("Text with [T123] link",
+				"Text with <a href='" + TRAC_URL + "search?q=%5BT123%5D'>[T123]</a> link");
+		assertAnnotatedTextEquals("[T123]",
+				"<a href='" + TRAC_URL + "search?q=%5BT123%5D'>[T123]</a>");
+	}
 
+	public void testInterTracFullChangesetLinkSyntax() {
+		assertAnnotatedTextEquals("Text with trac:changeset:123 link",
+				"Text with <a href='" + TRAC_URL + "search?q=trac%3Achangeset%3A123'>trac:changeset:123</a> link");
+		assertAnnotatedTextEquals("trac:changeset:123",
+				"<a href='" + TRAC_URL + "search?q=trac%3Achangeset%3A123'>trac:changeset:123</a>");
+	}
+	
+	public void testInterTracFullWikiLinkSyntax() {
+		assertAnnotatedTextEquals("Text with trac:wiki:PageName link",
+				"Text with <a href='" + TRAC_URL + "search?q=trac%3Awiki%3APageName'>trac:wiki:PageName</a> link");
+		assertAnnotatedTextEquals("trac:wiki:PageName",
+				"<a href='" + TRAC_URL + "search?q=trac%3Awiki%3APageName'>trac:wiki:PageName</a>");
+	}
+	
+	public void testMultipleLinks() {
+		String ticketUrl = "<a href='" + TRAC_URL + "ticket/101'>#101</a>";
+		String changesetUrl = "<a href='" + TRAC_URL + "changeset/303'>[303]</a>";
+		assertAnnotatedTextEquals("#101 for [303]: Text", ticketUrl + " for " + changesetUrl + ": Text");
+	}
+	
+	private void assertAnnotatedTextEquals(String originalText, String expectedAnnotatedText) {
+    	MarkupText markupText = new MarkupText(originalText);
+
+    	TracLinkAnnotator annotator = new TracLinkAnnotator();
+    	annotator.annotate(TRAC_URL, markupText);
+
         assertEquals(expectedAnnotatedText, markupText.toString());
     }
 }
