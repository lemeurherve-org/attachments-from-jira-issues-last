From f471f15d695f85df9a9c9b6a29fb3a5f396229a6 Mon Sep 17 00:00:00 2001
From: Marcus Better <marcus@better.se>
Date: Tue, 26 May 2009 19:10:54 +0200
Subject: [PATCH] Use correct property name for grails.project.work.dir, which changed in Grails 1.1.


Signed-off-by: Marcus Better <marcus@better.se>
---
 .../com/g2one/hudson/grails/GrailsBuilder.java     |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/src/main/java/com/g2one/hudson/grails/GrailsBuilder.java b/src/main/java/com/g2one/hudson/grails/GrailsBuilder.java
index 8420591..a6e8af0 100644
--- a/src/main/java/com/g2one/hudson/grails/GrailsBuilder.java
+++ b/src/main/java/com/g2one/hudson/grails/GrailsBuilder.java
@@ -134,7 +134,10 @@ public class GrailsBuilder extends Builder {
                     sytemProperties.put("grails.work.dir", grailsWorkDir.trim());
                 }
                 if (projectWorkDir != null && !"".equals(projectWorkDir.trim())) {
+                    // The property name was prefixed with "grails." in Grails 1.1.
+                    // We simply set both properties.
                     sytemProperties.put("project.work.dir", projectWorkDir.trim());
+                    sytemProperties.put("grails.project.work.dir", projectWorkDir.trim());
                 }
                 if (serverPort != null && !"".equals(serverPort.trim())) {
                     sytemProperties.put("server.port", serverPort.trim());
-- 
1.6.3.1

