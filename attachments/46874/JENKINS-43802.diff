diff --git a/src/main/java/org/jenkinsci/plugins/workflow/libs/SCMSourceRetriever.java b/src/main/java/org/jenkinsci/plugins/workflow/libs/SCMSourceRetriever.java
index 5312983..88d8631 100644
--- a/src/main/java/org/jenkinsci/plugins/workflow/libs/SCMSourceRetriever.java
+++ b/src/main/java/org/jenkinsci/plugins/workflow/libs/SCMSourceRetriever.java
@@ -34,6 +34,8 @@ import hudson.Util;
 import hudson.model.Computer;
 import hudson.model.Descriptor;
 import hudson.model.DescriptorVisibilityFilter;
+import hudson.model.Item;
+import hudson.model.ItemGroup;
 import hudson.model.Node;
 import hudson.model.Run;
 import hudson.model.TaskListener;
@@ -54,6 +56,7 @@ import jenkins.model.Jenkins;
 import jenkins.scm.api.SCMRevision;
 import jenkins.scm.api.SCMSource;
 import jenkins.scm.api.SCMSourceDescriptor;
+import jenkins.scm.api.SCMSourceOwner;
 import org.jenkinsci.Symbol;
 import org.jenkinsci.plugins.workflow.steps.scm.GenericSCMStep;
 import org.jenkinsci.plugins.workflow.steps.scm.SCMStep;
@@ -81,6 +84,7 @@ public class SCMSourceRetriever extends LibraryRetriever {
     }
 
     @Override public void retrieve(String name, String version, boolean changelog, FilePath target, Run<?, ?> run, TaskListener listener) throws Exception {
+        setOwner(run.getParent());
         SCMRevision revision = retrySCMOperation(listener, () -> scm.fetch(version, listener));
         if (revision == null) {
             throw new AbortException("No version " + version + " found for library " + name);
@@ -88,6 +92,17 @@ public class SCMSourceRetriever extends LibraryRetriever {
         doRetrieve(name, changelog, scm.build(revision.getHead(), revision), target, run, listener);
     }
 
+    private void setOwner(Item item) {
+        if (item instanceof SCMSourceOwner) {
+            scm.setOwner((SCMSourceOwner) item);
+        } else if (item != null) {
+            ItemGroup<? extends Item> parent = item.getParent();
+            if (parent instanceof Item) {
+                setOwner((Item) parent);
+            }
+        }
+    }
+
     @Override public void retrieve(String name, String version, FilePath target, Run<?, ?> run, TaskListener listener) throws Exception {
         retrieve(name, version, true, target, run, listener);
     }
